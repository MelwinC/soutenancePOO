<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (20) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: package: fr.cda.ihm, class: Formulaire">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">package fr.cda.ihm;</span>
<span class="source-line-no">002</span><span id="line-2"></span>
<span class="source-line-no">003</span><span id="line-3">import java.lang.*;</span>
<span class="source-line-no">004</span><span id="line-4">import java.awt.*;</span>
<span class="source-line-no">005</span><span id="line-5">import java.awt.event.*;</span>
<span class="source-line-no">006</span><span id="line-6">import javax.swing.*;</span>
<span class="source-line-no">007</span><span id="line-7">import javax.swing.text.*;</span>
<span class="source-line-no">008</span><span id="line-8">import java.util.*;</span>
<span class="source-line-no">009</span><span id="line-9"></span>
<span class="source-line-no">010</span><span id="line-10"></span>
<span class="source-line-no">011</span><span id="line-11">/**</span>
<span class="source-line-no">012</span><span id="line-12">   Classe de definition d'un formulaire JAVA permettant de faire a</span>
<span class="source-line-no">013</span><span id="line-13">   minima une IHM Java pour saisir des informations et faire des </span>
<span class="source-line-no">014</span><span id="line-14">   actions via des boutons.&lt;BR&gt;</span>
<span class="source-line-no">015</span><span id="line-15">   Pour cela, il faut que l'applicatif implemente les methodes de </span>
<span class="source-line-no">016</span><span id="line-16">   l'interface FormulaireInt.&lt;BR&gt;&lt;BR&gt;</span>
<span class="source-line-no">017</span><span id="line-17">*/</span>
<span class="source-line-no">018</span><span id="line-18">public class Formulaire</span>
<span class="source-line-no">019</span><span id="line-19">{</span>
<span class="source-line-no">020</span><span id="line-20">    private FormulaireInt             app;</span>
<span class="source-line-no">021</span><span id="line-21">    private JFrame                    frame;</span>
<span class="source-line-no">022</span><span id="line-22">    private int                       widthFrame;</span>
<span class="source-line-no">023</span><span id="line-23">    private int                       heightFrame;</span>
<span class="source-line-no">024</span><span id="line-24">    private JPanel                    panelPP;</span>
<span class="source-line-no">025</span><span id="line-25">    private ArrayList&lt;JButton&gt;        buttons;</span>
<span class="source-line-no">026</span><span id="line-26">    private boolean                   synchrone;</span>
<span class="source-line-no">027</span><span id="line-27">    private String                    buttonFermer;</span>
<span class="source-line-no">028</span><span id="line-28">    private Exception                 exceptionForm;</span>
<span class="source-line-no">029</span><span id="line-29">    private int                       xCour;</span>
<span class="source-line-no">030</span><span id="line-30">    private int                       yCour;</span>
<span class="source-line-no">031</span><span id="line-31">    private int                       widthLabelCour;</span>
<span class="source-line-no">032</span><span id="line-32">    private int                       widthGapCour;</span>
<span class="source-line-no">033</span><span id="line-33">    private int                       widthTextCour;</span>
<span class="source-line-no">034</span><span id="line-34">    private int                       widthButtonCour;</span>
<span class="source-line-no">035</span><span id="line-35">    private boolean                   sensHorizontal;</span>
<span class="source-line-no">036</span><span id="line-36">    private boolean                   sensVertical;</span>
<span class="source-line-no">037</span><span id="line-37">    private String                    font;     </span>
<span class="source-line-no">038</span><span id="line-38">    private boolean                   autoWidth;</span>
<span class="source-line-no">039</span><span id="line-39"></span>
<span class="source-line-no">040</span><span id="line-40">    private static int tailleFonte  = 11;</span>
<span class="source-line-no">041</span><span id="line-41">    private static int heightText   = 20;</span>
<span class="source-line-no">042</span><span id="line-42"></span>
<span class="source-line-no">043</span><span id="line-43">    /*  Verrou de synchronisation pour etre synchrone</span>
<span class="source-line-no">044</span><span id="line-44">       sur l'affichage d'un formulaire */</span>
<span class="source-line-no">045</span><span id="line-45">    private Integer verrou;</span>
<span class="source-line-no">046</span><span id="line-46"></span>
<span class="source-line-no">047</span><span id="line-47">    // Les elements IHM du formulaire</span>
<span class="source-line-no">048</span><span id="line-48">    Hashtable&lt;String,JComponent&gt;  elements;</span>
<span class="source-line-no">049</span><span id="line-49">    </span>
<span class="source-line-no">050</span><span id="line-50">    /**</span>
<span class="source-line-no">051</span><span id="line-51">       Constructeur d'un formulaire.&lt;br&gt;</span>
<span class="source-line-no">052</span><span id="line-52">       @param titre Titre affiche dans le bandeau de la fenetre</span>
<span class="source-line-no">053</span><span id="line-53">       @param app Un objet dont la classe implemente l'interface FormualaireInt</span>
<span class="source-line-no">054</span><span id="line-54">       @param width longueur du formulaire</span>
<span class="source-line-no">055</span><span id="line-55">       @param height hauteur du formulaire</span>
<span class="source-line-no">056</span><span id="line-56">    */</span>
<span class="source-line-no">057</span><span id="line-57">    public Formulaire(String titre, </span>
<span class="source-line-no">058</span><span id="line-58">                      FormulaireInt app,</span>
<span class="source-line-no">059</span><span id="line-59">                      int width,</span>
<span class="source-line-no">060</span><span id="line-60">                      int height)</span>
<span class="source-line-no">061</span><span id="line-61">    {</span>
<span class="source-line-no">062</span><span id="line-62">        initFormulaire(titre,app,false,width,height,true);</span>
<span class="source-line-no">063</span><span id="line-63">    }</span>
<span class="source-line-no">064</span><span id="line-64"></span>
<span class="source-line-no">065</span><span id="line-65">    /**</span>
<span class="source-line-no">066</span><span id="line-66">       Constructeur d'un formulaire.&lt;br&gt;</span>
<span class="source-line-no">067</span><span id="line-67">       @param titre Titre affiche dans le bandeau de la fenetre</span>
<span class="source-line-no">068</span><span id="line-68">       @param app Un objet dont la classe implemente l'interface FormualaireInt</span>
<span class="source-line-no">069</span><span id="line-69">       @param synchrone l'execution est synchrone si true</span>
<span class="source-line-no">070</span><span id="line-70">       @param width longueur du formulaire</span>
<span class="source-line-no">071</span><span id="line-71">       @param height hauteur du formulaire</span>
<span class="source-line-no">072</span><span id="line-72">       @param avecFrame si false alors pas de frame cree : que le panel</span>
<span class="source-line-no">073</span><span id="line-73">    */</span>
<span class="source-line-no">074</span><span id="line-74">    public Formulaire(String titre, </span>
<span class="source-line-no">075</span><span id="line-75">                      FormulaireInt app,</span>
<span class="source-line-no">076</span><span id="line-76">                      boolean synchrone,</span>
<span class="source-line-no">077</span><span id="line-77">                      int width,</span>
<span class="source-line-no">078</span><span id="line-78">                      int height,</span>
<span class="source-line-no">079</span><span id="line-79">                      boolean avecFrame)</span>
<span class="source-line-no">080</span><span id="line-80">    {</span>
<span class="source-line-no">081</span><span id="line-81">        initFormulaire(titre,app,synchrone,width,height,avecFrame);</span>
<span class="source-line-no">082</span><span id="line-82">    }</span>
<span class="source-line-no">083</span><span id="line-83"></span>
<span class="source-line-no">084</span><span id="line-84">    public void initFormulaire(String titre, </span>
<span class="source-line-no">085</span><span id="line-85">                               FormulaireInt app,</span>
<span class="source-line-no">086</span><span id="line-86">                               boolean synchrone,</span>
<span class="source-line-no">087</span><span id="line-87">                               int width,</span>
<span class="source-line-no">088</span><span id="line-88">                               int height,</span>
<span class="source-line-no">089</span><span id="line-89">                               boolean avecFrame)</span>
<span class="source-line-no">090</span><span id="line-90">    {</span>
<span class="source-line-no">091</span><span id="line-91">        this.app             = app;</span>
<span class="source-line-no">092</span><span id="line-92">        if (avecFrame)</span>
<span class="source-line-no">093</span><span id="line-93">            {</span>
<span class="source-line-no">094</span><span id="line-94">                this.frame           = new JFrame(titre);</span>
<span class="source-line-no">095</span><span id="line-95">                this.widthFrame      = width;</span>
<span class="source-line-no">096</span><span id="line-96">                this.heightFrame     = height;</span>
<span class="source-line-no">097</span><span id="line-97">            }</span>
<span class="source-line-no">098</span><span id="line-98">        else</span>
<span class="source-line-no">099</span><span id="line-99">            this.frame       = null;</span>
<span class="source-line-no">100</span><span id="line-100">        this.synchrone       = synchrone;</span>
<span class="source-line-no">101</span><span id="line-101">        this.buttonFermer    = "";</span>
<span class="source-line-no">102</span><span id="line-102">        this.font            = "Courier";</span>
<span class="source-line-no">103</span><span id="line-103">        </span>
<span class="source-line-no">104</span><span id="line-104">        this.panelPP     = new JPanel();</span>
<span class="source-line-no">105</span><span id="line-105">        this.panelPP.setLayout(null);</span>
<span class="source-line-no">106</span><span id="line-106"></span>
<span class="source-line-no">107</span><span id="line-107">        if (this.frame != null)</span>
<span class="source-line-no">108</span><span id="line-108">            {</span>
<span class="source-line-no">109</span><span id="line-109">                this.frame.add(panelPP);</span>
<span class="source-line-no">110</span><span id="line-110">                this.frame.addWindowListener(new FormulaireWindowListener());</span>
<span class="source-line-no">111</span><span id="line-111">            }</span>
<span class="source-line-no">112</span><span id="line-112"></span>
<span class="source-line-no">113</span><span id="line-113">        this.xCour               = 0;</span>
<span class="source-line-no">114</span><span id="line-114">        this.yCour               = 0;</span>
<span class="source-line-no">115</span><span id="line-115">        this.widthLabelCour      = 100;</span>
<span class="source-line-no">116</span><span id="line-116">        this.widthGapCour        = 0;</span>
<span class="source-line-no">117</span><span id="line-117">        this.widthTextCour       = 100;</span>
<span class="source-line-no">118</span><span id="line-118">        this.widthButtonCour     = 100;</span>
<span class="source-line-no">119</span><span id="line-119">        this.sensVertical        = true;</span>
<span class="source-line-no">120</span><span id="line-120">        this.sensHorizontal      = false;</span>
<span class="source-line-no">121</span><span id="line-121">        this.autoWidth           = true;       </span>
<span class="source-line-no">122</span><span id="line-122"></span>
<span class="source-line-no">123</span><span id="line-123">        this.verrou = new Integer(0);</span>
<span class="source-line-no">124</span><span id="line-124"></span>
<span class="source-line-no">125</span><span id="line-125">        this.elements = new Hashtable&lt;String,JComponent&gt;();</span>
<span class="source-line-no">126</span><span id="line-126">    }</span>
<span class="source-line-no">127</span><span id="line-127"></span>
<span class="source-line-no">128</span><span id="line-128">    /** Initialise l'applicatif.&lt;br&gt;Cette methode est utilisee dans le cas oe quand on cree le formulaire on ne connait pas encore l'applicatif qui gere le formulaire. On appelle alors cette methode pour initialiser l'applicatif du formulaire.</span>
<span class="source-line-no">129</span><span id="line-129">        @param app Un objet qui implemente l'interface Formulaireint */</span>
<span class="source-line-no">130</span><span id="line-130">    public void setApp(FormulaireInt app)</span>
<span class="source-line-no">131</span><span id="line-131">    {</span>
<span class="source-line-no">132</span><span id="line-132">        this.app = app;</span>
<span class="source-line-no">133</span><span id="line-133">    }</span>
<span class="source-line-no">134</span><span id="line-134"></span>
<span class="source-line-no">135</span><span id="line-135">    /**</span>
<span class="source-line-no">136</span><span id="line-136">       Retourne le panel principal du formulaire</span>
<span class="source-line-no">137</span><span id="line-137">       @return panel principal du formulaire</span>
<span class="source-line-no">138</span><span id="line-138">     */</span>
<span class="source-line-no">139</span><span id="line-139">    public JPanel getPanel()</span>
<span class="source-line-no">140</span><span id="line-140">    {</span>
<span class="source-line-no">141</span><span id="line-141">        return this.panelPP;</span>
<span class="source-line-no">142</span><span id="line-142">    }</span>
<span class="source-line-no">143</span><span id="line-143"></span>
<span class="source-line-no">144</span><span id="line-144">    /** Retourne la position courante en X de la position des elements</span>
<span class="source-line-no">145</span><span id="line-145">        @return int la valeur X */</span>
<span class="source-line-no">146</span><span id="line-146">    public int getXCour(){return xCour;}</span>
<span class="source-line-no">147</span><span id="line-147"></span>
<span class="source-line-no">148</span><span id="line-148">    /** Retourne la position courante en Y de la position des elements</span>
<span class="source-line-no">149</span><span id="line-149">        @return int la valeur Y */</span>
<span class="source-line-no">150</span><span id="line-150">    public int getYCour(){return yCour;}</span>
<span class="source-line-no">151</span><span id="line-151"></span>
<span class="source-line-no">152</span><span id="line-152">    /** Change la position courante </span>
<span class="source-line-no">153</span><span id="line-153">     @param x position en abscisse (horizontal) de la fenetre </span>
<span class="source-line-no">154</span><span id="line-154">     @param y position en ordonnee (vertical) de la fenetre </span>
<span class="source-line-no">155</span><span id="line-155">    */</span>
<span class="source-line-no">156</span><span id="line-156">    public void setPosition(int x,int y){xCour=x;yCour=y;}</span>
<span class="source-line-no">157</span><span id="line-157"></span>
<span class="source-line-no">158</span><span id="line-158">    /** Change la position courante par delta</span>
<span class="source-line-no">159</span><span id="line-159">     @param deltax position en abscisse (horizontal) de la fenetre </span>
<span class="source-line-no">160</span><span id="line-160">     @param deltay position en ordonnee (vertical) de la fenetre </span>
<span class="source-line-no">161</span><span id="line-161">    */</span>
<span class="source-line-no">162</span><span id="line-162">    public void addPosition(int deltax,int deltay)</span>
<span class="source-line-no">163</span><span id="line-163">    {</span>
<span class="source-line-no">164</span><span id="line-164">        xCour=xCour+deltax;</span>
<span class="source-line-no">165</span><span id="line-165">        yCour=yCour+deltay;</span>
<span class="source-line-no">166</span><span id="line-166">    }</span>
<span class="source-line-no">167</span><span id="line-167"></span>
<span class="source-line-no">168</span><span id="line-168">    /** Change la position courante en passant a la ligne suivante en position posx</span>
<span class="source-line-no">169</span><span id="line-169">        @param posx nouvelle position courante en x */</span>
<span class="source-line-no">170</span><span id="line-170">    public void dessous(int posx)</span>
<span class="source-line-no">171</span><span id="line-171">    {</span>
<span class="source-line-no">172</span><span id="line-172">        this.xCour = posx;</span>
<span class="source-line-no">173</span><span id="line-173">        this.yCour = this.yCour+this.heightText+3;</span>
<span class="source-line-no">174</span><span id="line-174">    }</span>
<span class="source-line-no">175</span><span id="line-175"></span>
<span class="source-line-no">176</span><span id="line-176">    /** change le sens en HORIZONTAL */</span>
<span class="source-line-no">177</span><span id="line-177">    public void horizontal()</span>
<span class="source-line-no">178</span><span id="line-178">    {</span>
<span class="source-line-no">179</span><span id="line-179">        this.sensHorizontal=true;</span>
<span class="source-line-no">180</span><span id="line-180">        this.sensVertical=false;</span>
<span class="source-line-no">181</span><span id="line-181">    }</span>
<span class="source-line-no">182</span><span id="line-182"></span>
<span class="source-line-no">183</span><span id="line-183">    /** change le sens en VERTICAL */</span>
<span class="source-line-no">184</span><span id="line-184">    public void vertical()</span>
<span class="source-line-no">185</span><span id="line-185">    {</span>
<span class="source-line-no">186</span><span id="line-186">        this.sensHorizontal=false;</span>
<span class="source-line-no">187</span><span id="line-187">        this.sensVertical=true;</span>
<span class="source-line-no">188</span><span id="line-188">    }</span>
<span class="source-line-no">189</span><span id="line-189"></span>
<span class="source-line-no">190</span><span id="line-190">    /** Le contour des textes de Label Text et Button sont autoamtiquement ou pas ajuster a la taille </span>
<span class="source-line-no">191</span><span id="line-191">        @param auto boolean</span>
<span class="source-line-no">192</span><span id="line-192">     */</span>
<span class="source-line-no">193</span><span id="line-193">    public void setAutoWidth(boolean auto){autoWidth=auto;}</span>
<span class="source-line-no">194</span><span id="line-194"></span>
<span class="source-line-no">195</span><span id="line-195"></span>
<span class="source-line-no">196</span><span id="line-196">    /** Change la largeur courante des label</span>
<span class="source-line-no">197</span><span id="line-197">        @param width nouvelle largeur courante</span>
<span class="source-line-no">198</span><span id="line-198">     */</span>
<span class="source-line-no">199</span><span id="line-199">    public void setWidthLabelCour(int width){widthLabelCour=width;}</span>
<span class="source-line-no">200</span><span id="line-200"></span>
<span class="source-line-no">201</span><span id="line-201">    /** Change la largeur courante des textes de saisi</span>
<span class="source-line-no">202</span><span id="line-202">        @param width nouvelle largeur courante</span>
<span class="source-line-no">203</span><span id="line-203">     */</span>
<span class="source-line-no">204</span><span id="line-204">    public void setWidthTextCour(int width){widthTextCour=width;}</span>
<span class="source-line-no">205</span><span id="line-205"></span>
<span class="source-line-no">206</span><span id="line-206"></span>
<span class="source-line-no">207</span><span id="line-207">    /** Change la largeur courante de separation entre le label et le texte des champs de saisi</span>
<span class="source-line-no">208</span><span id="line-208">        @param width nouvelle largeur courante</span>
<span class="source-line-no">209</span><span id="line-209">     */</span>
<span class="source-line-no">210</span><span id="line-210">    public void setWidthGapCour(int width){widthGapCour=width;}</span>
<span class="source-line-no">211</span><span id="line-211"></span>
<span class="source-line-no">212</span><span id="line-212">    /** Change la largeur courante des boutons</span>
<span class="source-line-no">213</span><span id="line-213">        @param width nouvelle largeur courante</span>
<span class="source-line-no">214</span><span id="line-214">     */</span>
<span class="source-line-no">215</span><span id="line-215">    public void setWidthButtonCour(int width){widthButtonCour=width;}</span>
<span class="source-line-no">216</span><span id="line-216"></span>
<span class="source-line-no">217</span><span id="line-217"></span>
<span class="source-line-no">218</span><span id="line-218"></span>
<span class="source-line-no">219</span><span id="line-219">    /** Affichage du formulaire.&lt;br&gt;</span>
<span class="source-line-no">220</span><span id="line-220">     Cette methode peut etre synhrone (voir le parametre synhrone e la creation du formulaire.</span>
<span class="source-line-no">221</span><span id="line-221">    */</span>
<span class="source-line-no">222</span><span id="line-222">    public void afficher() throws FormulaireException</span>
<span class="source-line-no">223</span><span id="line-223">    {</span>
<span class="source-line-no">224</span><span id="line-224">        this.frame.setPreferredSize(new Dimension(this.widthFrame+15,this.heightFrame+40));</span>
<span class="source-line-no">225</span><span id="line-225">        this.frame.pack();</span>
<span class="source-line-no">226</span><span id="line-226">        this.frame.show();</span>
<span class="source-line-no">227</span><span id="line-227">        if (this.synchrone) </span>
<span class="source-line-no">228</span><span id="line-228">            {</span>
<span class="source-line-no">229</span><span id="line-229">                attendre();</span>
<span class="source-line-no">230</span><span id="line-230">                if (exceptionForm!=null)</span>
<span class="source-line-no">231</span><span id="line-231">                    {</span>
<span class="source-line-no">232</span><span id="line-232">                        Exception ex = exceptionForm;</span>
<span class="source-line-no">233</span><span id="line-233">                        exceptionForm = null;</span>
<span class="source-line-no">234</span><span id="line-234">                        throw new FormulaireException(ex);</span>
<span class="source-line-no">235</span><span id="line-235">                    }</span>
<span class="source-line-no">236</span><span id="line-236">            }</span>
<span class="source-line-no">237</span><span id="line-237">    }</span>
<span class="source-line-no">238</span><span id="line-238"></span>
<span class="source-line-no">239</span><span id="line-239">    /** Affichage du formulaire en x,y de l'ecran */</span>
<span class="source-line-no">240</span><span id="line-240">    public void afficher(int x,int y) throws FormulaireException</span>
<span class="source-line-no">241</span><span id="line-241">    {</span>
<span class="source-line-no">242</span><span id="line-242">        this.frame.setLocation(x,y);</span>
<span class="source-line-no">243</span><span id="line-243">        afficher();</span>
<span class="source-line-no">244</span><span id="line-244">    }</span>
<span class="source-line-no">245</span><span id="line-245"></span>
<span class="source-line-no">246</span><span id="line-246">    /** Permet de fermer le formulaire</span>
<span class="source-line-no">247</span><span id="line-247">     */</span>
<span class="source-line-no">248</span><span id="line-248">    public void fermer()</span>
<span class="source-line-no">249</span><span id="line-249">    {</span>
<span class="source-line-no">250</span><span id="line-250">        frame.dispose();</span>
<span class="source-line-no">251</span><span id="line-251">        if (synchrone) debloquer();</span>
<span class="source-line-no">252</span><span id="line-252">    }</span>
<span class="source-line-no">253</span><span id="line-253"></span>
<span class="source-line-no">254</span><span id="line-254"></span>
<span class="source-line-no">255</span><span id="line-255">    /** Ajout dans le formulaire un label.&lt;br&gt;</span>
<span class="source-line-no">256</span><span id="line-256">        Valeur -1 implique prend la valeur precedente et comportement par defaut de positionnement </span>
<span class="source-line-no">257</span><span id="line-257">        @param label Chaine qui precede la zone de saisie</span>
<span class="source-line-no">258</span><span id="line-258">    */</span>
<span class="source-line-no">259</span><span id="line-259">    public void addLabel(String label)</span>
<span class="source-line-no">260</span><span id="line-260">    {</span>
<span class="source-line-no">261</span><span id="line-261">        int xChamp=this.xCour;</span>
<span class="source-line-no">262</span><span id="line-262">        int yChamp=this.yCour;</span>
<span class="source-line-no">263</span><span id="line-263">        int widthLabel=this.widthLabelCour;</span>
<span class="source-line-no">264</span><span id="line-264">        </span>
<span class="source-line-no">265</span><span id="line-265">        if (sensHorizontal) </span>
<span class="source-line-no">266</span><span id="line-266">            this.xCour=this.xCour+this.widthLabelCour;</span>
<span class="source-line-no">267</span><span id="line-267">        if (sensVertical)</span>
<span class="source-line-no">268</span><span id="line-268">            this.yCour=yChamp+this.heightText+3;</span>
<span class="source-line-no">269</span><span id="line-269"></span>
<span class="source-line-no">270</span><span id="line-270">        JLabel l = new JLabel(label);</span>
<span class="source-line-no">271</span><span id="line-271"></span>
<span class="source-line-no">272</span><span id="line-272">        JPanel p = new JPanel();</span>
<span class="source-line-no">273</span><span id="line-273">        p.setLayout(null);</span>
<span class="source-line-no">274</span><span id="line-274">        Font f = new Font(font,Font.BOLD,tailleFonte);</span>
<span class="source-line-no">275</span><span id="line-275">        l.setFont(f);</span>
<span class="source-line-no">276</span><span id="line-276"></span>
<span class="source-line-no">277</span><span id="line-277">        if (autoWidth) widthLabel = l.getFontMetrics(f).stringWidth(label); </span>
<span class="source-line-no">278</span><span id="line-278"></span>
<span class="source-line-no">279</span><span id="line-279">        l.setBounds(0,0,widthLabel,this.heightText);</span>
<span class="source-line-no">280</span><span id="line-280"></span>
<span class="source-line-no">281</span><span id="line-281">        p.add(l);</span>
<span class="source-line-no">282</span><span id="line-282"></span>
<span class="source-line-no">283</span><span id="line-283">        p.setBounds(xChamp,yChamp,widthLabel,this.heightText);</span>
<span class="source-line-no">284</span><span id="line-284"></span>
<span class="source-line-no">285</span><span id="line-285">        this.panelPP.add(p);</span>
<span class="source-line-no">286</span><span id="line-286">        this.panelPP.repaint();</span>
<span class="source-line-no">287</span><span id="line-287">        if (this.frame!=null)</span>
<span class="source-line-no">288</span><span id="line-288">            this.frame.repaint();</span>
<span class="source-line-no">289</span><span id="line-289">    }</span>
<span class="source-line-no">290</span><span id="line-290">    </span>
<span class="source-line-no">291</span><span id="line-291"></span>
<span class="source-line-no">292</span><span id="line-292"></span>
<span class="source-line-no">293</span><span id="line-293">    /** Ajout dans le formulaire d'un texte de saisie compose d'un label </span>
<span class="source-line-no">294</span><span id="line-294">        et d'une zone de saisie.&lt;br&gt;</span>
<span class="source-line-no">295</span><span id="line-295">        @param nom Le nom du champ</span>
<span class="source-line-no">296</span><span id="line-296">        @param label Chaine qui precede la zone de saisie</span>
<span class="source-line-no">297</span><span id="line-297">        @param editable determine si la zone de saisie est editable </span>
<span class="source-line-no">298</span><span id="line-298">        @param value valeur initiale dans la zone de saisie</span>
<span class="source-line-no">299</span><span id="line-299">    */</span>
<span class="source-line-no">300</span><span id="line-300">    public void addText(String nom,</span>
<span class="source-line-no">301</span><span id="line-301">                        String label,</span>
<span class="source-line-no">302</span><span id="line-302">                        boolean editable,</span>
<span class="source-line-no">303</span><span id="line-303">                        String value)</span>
<span class="source-line-no">304</span><span id="line-304">    {</span>
<span class="source-line-no">305</span><span id="line-305">        int xChamp=this.xCour;</span>
<span class="source-line-no">306</span><span id="line-306">        int yChamp=this.yCour;</span>
<span class="source-line-no">307</span><span id="line-307">        int widthLabel=this.widthLabelCour;</span>
<span class="source-line-no">308</span><span id="line-308">        int widthGap=this.widthGapCour;</span>
<span class="source-line-no">309</span><span id="line-309">        int widthText=this.widthTextCour;</span>
<span class="source-line-no">310</span><span id="line-310">        </span>
<span class="source-line-no">311</span><span id="line-311">        if (this.sensHorizontal)</span>
<span class="source-line-no">312</span><span id="line-312">            this.xCour=xChamp+widthLabel+widthGap+widthText+3;</span>
<span class="source-line-no">313</span><span id="line-313">        if (this.sensVertical)</span>
<span class="source-line-no">314</span><span id="line-314">            this.yCour=yChamp+this.heightText+3;</span>
<span class="source-line-no">315</span><span id="line-315"></span>
<span class="source-line-no">316</span><span id="line-316">        JLabel l = new JLabel(label);</span>
<span class="source-line-no">317</span><span id="line-317">        JTextField tf = new JTextField();</span>
<span class="source-line-no">318</span><span id="line-318">        tf.setEditable(editable);</span>
<span class="source-line-no">319</span><span id="line-319">        tf.setText(value);</span>
<span class="source-line-no">320</span><span id="line-320">        elements.put(nom,tf);</span>
<span class="source-line-no">321</span><span id="line-321">        </span>
<span class="source-line-no">322</span><span id="line-322"></span>
<span class="source-line-no">323</span><span id="line-323">        JPanel p = new JPanel();</span>
<span class="source-line-no">324</span><span id="line-324">        p.setLayout(null);</span>
<span class="source-line-no">325</span><span id="line-325">        Font f = new Font(font,Font.BOLD,tailleFonte);</span>
<span class="source-line-no">326</span><span id="line-326">        l.setFont(f);</span>
<span class="source-line-no">327</span><span id="line-327">        tf.setFont(f);</span>
<span class="source-line-no">328</span><span id="line-328"></span>
<span class="source-line-no">329</span><span id="line-329">        if (autoWidth) widthLabel = l.getFontMetrics(f).stringWidth(label)+3; </span>
<span class="source-line-no">330</span><span id="line-330"></span>
<span class="source-line-no">331</span><span id="line-331">        l.setBounds(0,0,widthLabel,this.heightText);</span>
<span class="source-line-no">332</span><span id="line-332">        tf.setBounds(widthLabel+widthGap,0,widthText,this.heightText);</span>
<span class="source-line-no">333</span><span id="line-333"></span>
<span class="source-line-no">334</span><span id="line-334"></span>
<span class="source-line-no">335</span><span id="line-335">        p.add(l);</span>
<span class="source-line-no">336</span><span id="line-336">        p.add(tf);</span>
<span class="source-line-no">337</span><span id="line-337"></span>
<span class="source-line-no">338</span><span id="line-338">        p.setBounds(xChamp,yChamp,widthLabel+widthGap+widthText,this.heightText);</span>
<span class="source-line-no">339</span><span id="line-339"></span>
<span class="source-line-no">340</span><span id="line-340">        this.panelPP.add(p);</span>
<span class="source-line-no">341</span><span id="line-341">        this.panelPP.repaint();</span>
<span class="source-line-no">342</span><span id="line-342">        if (this.frame!=null) this.frame.repaint();</span>
<span class="source-line-no">343</span><span id="line-343">    }</span>
<span class="source-line-no">344</span><span id="line-344"></span>
<span class="source-line-no">345</span><span id="line-345">    /** Ajout dans le formulaire d'un texte de saisie compose d'un label </span>
<span class="source-line-no">346</span><span id="line-346">        et d'une zone de saisie.&lt;br&gt;</span>
<span class="source-line-no">347</span><span id="line-347">        @param nom Le nom du champ</span>
<span class="source-line-no">348</span><span id="line-348">        @param label Chaine qui precede la zone de saisie</span>
<span class="source-line-no">349</span><span id="line-349">        @param editable determine si la zone de saisie est editable </span>
<span class="source-line-no">350</span><span id="line-350">        @param value valeur initiale dans la zone de saisie </span>
<span class="source-line-no">351</span><span id="line-351">        @param width longueur de la zone de texte</span>
<span class="source-line-no">352</span><span id="line-352">        @param height hauteur de la zone de texte</span>
<span class="source-line-no">353</span><span id="line-353">    */</span>
<span class="source-line-no">354</span><span id="line-354">    public void addZoneText(String nom,</span>
<span class="source-line-no">355</span><span id="line-355">                            String label,</span>
<span class="source-line-no">356</span><span id="line-356">                            boolean editable,</span>
<span class="source-line-no">357</span><span id="line-357">                            String value,</span>
<span class="source-line-no">358</span><span id="line-358">                            int width,</span>
<span class="source-line-no">359</span><span id="line-359">                            int height)</span>
<span class="source-line-no">360</span><span id="line-360">    {</span>
<span class="source-line-no">361</span><span id="line-361">        int xChamp=this.xCour;</span>
<span class="source-line-no">362</span><span id="line-362">        int yChamp=this.yCour;</span>
<span class="source-line-no">363</span><span id="line-363"></span>
<span class="source-line-no">364</span><span id="line-364">        if (this.sensHorizontal)</span>
<span class="source-line-no">365</span><span id="line-365">            this.xCour=xChamp + width+3;</span>
<span class="source-line-no">366</span><span id="line-366">        if (this.sensVertical)</span>
<span class="source-line-no">367</span><span id="line-367">            this.yCour=yChamp+height+3;</span>
<span class="source-line-no">368</span><span id="line-368">        </span>
<span class="source-line-no">369</span><span id="line-369">        JLabel l = new JLabel(label);</span>
<span class="source-line-no">370</span><span id="line-370">        l.setFont(new Font(font,Font.BOLD,tailleFonte));</span>
<span class="source-line-no">371</span><span id="line-371">        l.setBounds(0,0,width,this.heightText);</span>
<span class="source-line-no">372</span><span id="line-372"></span>
<span class="source-line-no">373</span><span id="line-373">        JTextArea tf = new JTextArea();</span>
<span class="source-line-no">374</span><span id="line-374">        tf.setEditable(editable);</span>
<span class="source-line-no">375</span><span id="line-375">        tf.setText(value);</span>
<span class="source-line-no">376</span><span id="line-376">        tf.setFont(new Font(font,Font.BOLD,tailleFonte));</span>
<span class="source-line-no">377</span><span id="line-377"></span>
<span class="source-line-no">378</span><span id="line-378">        elements.put(nom,tf);</span>
<span class="source-line-no">379</span><span id="line-379"></span>
<span class="source-line-no">380</span><span id="line-380">        JScrollPane scrollbar = new JScrollPane(tf);</span>
<span class="source-line-no">381</span><span id="line-381">        scrollbar.setBounds(0,0+this.heightText+3,width,height-this.heightText-3);</span>
<span class="source-line-no">382</span><span id="line-382">        scrollbar.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS); </span>
<span class="source-line-no">383</span><span id="line-383">        scrollbar.setPreferredSize(new Dimension(width,height-this.heightText-3));</span>
<span class="source-line-no">384</span><span id="line-384"></span>
<span class="source-line-no">385</span><span id="line-385">        JPanel p = new JPanel();</span>
<span class="source-line-no">386</span><span id="line-386">        p.setLayout(null);</span>
<span class="source-line-no">387</span><span id="line-387"></span>
<span class="source-line-no">388</span><span id="line-388">        p.add(l);</span>
<span class="source-line-no">389</span><span id="line-389">        p.add(scrollbar);</span>
<span class="source-line-no">390</span><span id="line-390">        </span>
<span class="source-line-no">391</span><span id="line-391">        p.setBounds(xChamp,yChamp,width,height);</span>
<span class="source-line-no">392</span><span id="line-392"></span>
<span class="source-line-no">393</span><span id="line-393">        this.panelPP.add(p);</span>
<span class="source-line-no">394</span><span id="line-394">        this.panelPP.repaint();</span>
<span class="source-line-no">395</span><span id="line-395">        if (this.frame!=null) this.frame.repaint();</span>
<span class="source-line-no">396</span><span id="line-396">    }</span>
<span class="source-line-no">397</span><span id="line-397">    </span>
<span class="source-line-no">398</span><span id="line-398">    /** Ajout dans le formulaire d'une liste scrollable de valeurs.&lt;br&gt;</span>
<span class="source-line-no">399</span><span id="line-399">        @param nom Le nom de la liste scrollable</span>
<span class="source-line-no">400</span><span id="line-400">        @param titre Titre qui precede la liste</span>
<span class="source-line-no">401</span><span id="line-401">        @param editable determine si la zone de saisie est editable </span>
<span class="source-line-no">402</span><span id="line-402">        @param values valeur initiale dans la zone de saisie </span>
<span class="source-line-no">403</span><span id="line-403">        @param width longueur de la zone (ou -1)</span>
<span class="source-line-no">404</span><span id="line-404">        @param height hauteur de la zone </span>
<span class="source-line-no">405</span><span id="line-405">    */</span>
<span class="source-line-no">406</span><span id="line-406">    public void addListScroll(String nom,</span>
<span class="source-line-no">407</span><span id="line-407">                              String titre,</span>
<span class="source-line-no">408</span><span id="line-408">                              boolean editable,</span>
<span class="source-line-no">409</span><span id="line-409">                              String[] values,</span>
<span class="source-line-no">410</span><span id="line-410">                              int width,</span>
<span class="source-line-no">411</span><span id="line-411">                              int height)</span>
<span class="source-line-no">412</span><span id="line-412">    {</span>
<span class="source-line-no">413</span><span id="line-413">        int xChamp=this.xCour;</span>
<span class="source-line-no">414</span><span id="line-414">        int yChamp=this.yCour;</span>
<span class="source-line-no">415</span><span id="line-415"></span>
<span class="source-line-no">416</span><span id="line-416">        if (this.sensHorizontal)</span>
<span class="source-line-no">417</span><span id="line-417">            this.xCour=xChamp + width+3;</span>
<span class="source-line-no">418</span><span id="line-418">        if (this.sensVertical)</span>
<span class="source-line-no">419</span><span id="line-419">            this.yCour=yChamp+height+3;</span>
<span class="source-line-no">420</span><span id="line-420">        </span>
<span class="source-line-no">421</span><span id="line-421">        JLabel titrel = new JLabel(titre);</span>
<span class="source-line-no">422</span><span id="line-422">        titrel.setFont(new Font(font,Font.BOLD,tailleFonte));</span>
<span class="source-line-no">423</span><span id="line-423">        titrel.setBounds(0,0,width,this.heightText);</span>
<span class="source-line-no">424</span><span id="line-424"></span>
<span class="source-line-no">425</span><span id="line-425">        JList liste = new JList(new DefaultListModel());</span>
<span class="source-line-no">426</span><span id="line-426">        liste.setFont(new Font(font,Font.BOLD,tailleFonte));</span>
<span class="source-line-no">427</span><span id="line-427">        JScrollPane scroll = new JScrollPane(liste);</span>
<span class="source-line-no">428</span><span id="line-428">        scroll.setBounds(0,0+this.heightText+3,width,height-this.heightText-3);</span>
<span class="source-line-no">429</span><span id="line-429"></span>
<span class="source-line-no">430</span><span id="line-430">        liste.setEnabled(editable);</span>
<span class="source-line-no">431</span><span id="line-431">        Vector&lt;String&gt; v = new Vector&lt;String&gt;();</span>
<span class="source-line-no">432</span><span id="line-432">        if (values!=null)</span>
<span class="source-line-no">433</span><span id="line-433">            Collections.addAll(v,values);</span>
<span class="source-line-no">434</span><span id="line-434"></span>
<span class="source-line-no">435</span><span id="line-435">        elements.put(nom,liste);</span>
<span class="source-line-no">436</span><span id="line-436"></span>
<span class="source-line-no">437</span><span id="line-437"></span>
<span class="source-line-no">438</span><span id="line-438">        JPanel p = new JPanel(new BorderLayout());</span>
<span class="source-line-no">439</span><span id="line-439">        p.add(titrel,BorderLayout.NORTH);</span>
<span class="source-line-no">440</span><span id="line-440">        p.add(scroll,BorderLayout.CENTER);</span>
<span class="source-line-no">441</span><span id="line-441"></span>
<span class="source-line-no">442</span><span id="line-442">        p.setBounds(xChamp,yChamp,width,height);</span>
<span class="source-line-no">443</span><span id="line-443"></span>
<span class="source-line-no">444</span><span id="line-444">        liste.setListData(v);</span>
<span class="source-line-no">445</span><span id="line-445"></span>
<span class="source-line-no">446</span><span id="line-446">        this.panelPP.add(p);</span>
<span class="source-line-no">447</span><span id="line-447">        this.panelPP.repaint();</span>
<span class="source-line-no">448</span><span id="line-448">        if (this.frame!=null)this.frame.repaint();</span>
<span class="source-line-no">449</span><span id="line-449">    }</span>
<span class="source-line-no">450</span><span id="line-450">    </span>
<span class="source-line-no">451</span><span id="line-451">    /** Designe le bouton qui ferme la fenetre et debloque si synchrone</span>
<span class="source-line-no">452</span><span id="line-452">        @param nomButton le nom du bouton</span>
<span class="source-line-no">453</span><span id="line-453">     */</span>
<span class="source-line-no">454</span><span id="line-454">    public void setButtonFermer(String nomButton)</span>
<span class="source-line-no">455</span><span id="line-455">    {</span>
<span class="source-line-no">456</span><span id="line-456">        this.buttonFermer = nomButton;</span>
<span class="source-line-no">457</span><span id="line-457">    }</span>
<span class="source-line-no">458</span><span id="line-458"></span>
<span class="source-line-no">459</span><span id="line-459">    /** Ajout dans le formulaire d'un bouton.&lt;br&gt;</span>
<span class="source-line-no">460</span><span id="line-460">        @param nom Le nom du bouton</span>
<span class="source-line-no">461</span><span id="line-461">        @param button Texte du bouton </span>
<span class="source-line-no">462</span><span id="line-462">    */</span>
<span class="source-line-no">463</span><span id="line-463">    public void addButton(String nom,</span>
<span class="source-line-no">464</span><span id="line-464">                          String button)</span>
<span class="source-line-no">465</span><span id="line-465">    {</span>
<span class="source-line-no">466</span><span id="line-466">        int xChamp=this.xCour;</span>
<span class="source-line-no">467</span><span id="line-467">        int yChamp=this.yCour;</span>
<span class="source-line-no">468</span><span id="line-468">        int width =this.widthButtonCour;</span>
<span class="source-line-no">469</span><span id="line-469"></span>
<span class="source-line-no">470</span><span id="line-470">        if (this.sensHorizontal)</span>
<span class="source-line-no">471</span><span id="line-471">            this.xCour=xChamp+width+3;</span>
<span class="source-line-no">472</span><span id="line-472">        if (this.sensVertical)</span>
<span class="source-line-no">473</span><span id="line-473">            this.yCour=yChamp+this.heightText+3;</span>
<span class="source-line-no">474</span><span id="line-474"></span>
<span class="source-line-no">475</span><span id="line-475">        </span>
<span class="source-line-no">476</span><span id="line-476">        JButton b = new JButton(button);</span>
<span class="source-line-no">477</span><span id="line-477">        Font f = new Font(font,Font.BOLD,tailleFonte);</span>
<span class="source-line-no">478</span><span id="line-478">        b.setFont(f);</span>
<span class="source-line-no">479</span><span id="line-479">        elements.put(nom,b);</span>
<span class="source-line-no">480</span><span id="line-480">        b.setMargin(new Insets(0, 0, 0, 0));</span>
<span class="source-line-no">481</span><span id="line-481">        if (autoWidth) width = b.getFontMetrics(f).stringWidth(button)+20;</span>
<span class="source-line-no">482</span><span id="line-482"></span>
<span class="source-line-no">483</span><span id="line-483">        b.setBounds(xChamp,yChamp,width,this.heightText);</span>
<span class="source-line-no">484</span><span id="line-484"></span>
<span class="source-line-no">485</span><span id="line-485">        b.setPreferredSize(new Dimension(width,this.heightText));</span>
<span class="source-line-no">486</span><span id="line-486">        b.addActionListener(new SubmitListener(this,nom));</span>
<span class="source-line-no">487</span><span id="line-487"></span>
<span class="source-line-no">488</span><span id="line-488">        this.panelPP.add(b);</span>
<span class="source-line-no">489</span><span id="line-489">        this.panelPP.repaint();</span>
<span class="source-line-no">490</span><span id="line-490">        if (this.frame!=null)this.frame.repaint();</span>
<span class="source-line-no">491</span><span id="line-491">    }</span>
<span class="source-line-no">492</span><span id="line-492"></span>
<span class="source-line-no">493</span><span id="line-493">    /** Ajout d'un Panel dans le formulaire</span>
<span class="source-line-no">494</span><span id="line-494">        @param panel le panel a ajouter</span>
<span class="source-line-no">495</span><span id="line-495">        @param width largeur du panel</span>
<span class="source-line-no">496</span><span id="line-496">        @param height hauteur du panel</span>
<span class="source-line-no">497</span><span id="line-497">    */</span>
<span class="source-line-no">498</span><span id="line-498">    public void addPanel(JPanel panel,int width, int height)</span>
<span class="source-line-no">499</span><span id="line-499">    {</span>
<span class="source-line-no">500</span><span id="line-500">        int posx = this.xCour;</span>
<span class="source-line-no">501</span><span id="line-501">        int posy = this.yCour;</span>
<span class="source-line-no">502</span><span id="line-502"></span>
<span class="source-line-no">503</span><span id="line-503">        if (this.sensHorizontal)</span>
<span class="source-line-no">504</span><span id="line-504">            this.xCour=posx+width+3;</span>
<span class="source-line-no">505</span><span id="line-505">        if (this.sensVertical)</span>
<span class="source-line-no">506</span><span id="line-506">            this.yCour=posy+height+3;</span>
<span class="source-line-no">507</span><span id="line-507"></span>
<span class="source-line-no">508</span><span id="line-508">        panel.setBounds(posx,posy,width,height);</span>
<span class="source-line-no">509</span><span id="line-509">        this.panelPP.add(panel);</span>
<span class="source-line-no">510</span><span id="line-510">        this.panelPP.repaint();</span>
<span class="source-line-no">511</span><span id="line-511">        if (this.frame!=null)this.frame.repaint();</span>
<span class="source-line-no">512</span><span id="line-512">    }</span>
<span class="source-line-no">513</span><span id="line-513"></span>
<span class="source-line-no">514</span><span id="line-514">    /** Methode qui ajoute un canvas de grille</span>
<span class="source-line-no">515</span><span id="line-515">        @param nbLigne nombre de ligne de la grille</span>
<span class="source-line-no">516</span><span id="line-516">        @param nbColonne nombre de colonne de la grille</span>
<span class="source-line-no">517</span><span id="line-517">        @param tailleCase taille de la case (en pixel)</span>
<span class="source-line-no">518</span><span id="line-518">        @param controle objet dont la classe surcharge les methodes de l'interface ControlesCanvasIHM. Il permet de realiser les actions realisees dans la grille.</span>
<span class="source-line-no">519</span><span id="line-519">     */</span>
<span class="source-line-no">520</span><span id="line-520">    public CanvasIHM addGrilleIHM(int nbLigne,</span>
<span class="source-line-no">521</span><span id="line-521">                                  int nbColonne,</span>
<span class="source-line-no">522</span><span id="line-522">                                  int tailleCase,</span>
<span class="source-line-no">523</span><span id="line-523">                                  AdaptaterControlesCanvasIHM controle)</span>
<span class="source-line-no">524</span><span id="line-524">    {</span>
<span class="source-line-no">525</span><span id="line-525">        CanvasIHM grille;</span>
<span class="source-line-no">526</span><span id="line-526">        </span>
<span class="source-line-no">527</span><span id="line-527">        grille = new CanvasIHM(nbLigne,nbColonne,tailleCase);</span>
<span class="source-line-no">528</span><span id="line-528">        grille.setActions(controle);</span>
<span class="source-line-no">529</span><span id="line-529">        addPanel(grille.getPanel(),</span>
<span class="source-line-no">530</span><span id="line-530">                 grille.getWidth()+30,grille.getHeight()+30);</span>
<span class="source-line-no">531</span><span id="line-531">        </span>
<span class="source-line-no">532</span><span id="line-532">        return(grille);</span>
<span class="source-line-no">533</span><span id="line-533">    }</span>
<span class="source-line-no">534</span><span id="line-534"></span>
<span class="source-line-no">535</span><span id="line-535">    /** Methode qui ajoute un canvas de grille</span>
<span class="source-line-no">536</span><span id="line-536">        @param width largeur du canvas</span>
<span class="source-line-no">537</span><span id="line-537">        @param height hauteur du canvas</span>
<span class="source-line-no">538</span><span id="line-538">        @param controle objet dont la classe surcharge les methodes de l'interface ControlesCanvasIHM. Il permet de realiser les actions realisees dans la grille.</span>
<span class="source-line-no">539</span><span id="line-539">     */</span>
<span class="source-line-no">540</span><span id="line-540">    public CanvasIHM addCanvasIHM(int width,</span>
<span class="source-line-no">541</span><span id="line-541">                                  int height,</span>
<span class="source-line-no">542</span><span id="line-542">                                  AdaptaterControlesCanvasIHM controle)</span>
<span class="source-line-no">543</span><span id="line-543">    {</span>
<span class="source-line-no">544</span><span id="line-544">        CanvasIHM grille;</span>
<span class="source-line-no">545</span><span id="line-545">        </span>
<span class="source-line-no">546</span><span id="line-546">        grille = new CanvasIHM(width,height);</span>
<span class="source-line-no">547</span><span id="line-547">        grille.getPanel().setBackground(Color.yellow);</span>
<span class="source-line-no">548</span><span id="line-548">        grille.setActions(controle);</span>
<span class="source-line-no">549</span><span id="line-549">        addPanel(grille.getPanel(),</span>
<span class="source-line-no">550</span><span id="line-550">                 grille.getWidth()+30,grille.getHeight()+30);</span>
<span class="source-line-no">551</span><span id="line-551"></span>
<span class="source-line-no">552</span><span id="line-552">        return(grille);</span>
<span class="source-line-no">553</span><span id="line-553">    }</span>
<span class="source-line-no">554</span><span id="line-554"></span>
<span class="source-line-no">555</span><span id="line-555">    /** Methode qui retourne la valeur d'un champ.</span>
<span class="source-line-no">556</span><span id="line-556">        @param nom Le nom du champ</span>
<span class="source-line-no">557</span><span id="line-557">        @return valeur la nouvelle valeur du champ */</span>
<span class="source-line-no">558</span><span id="line-558">    public String getValeurChamp(String nom)</span>
<span class="source-line-no">559</span><span id="line-559">    {</span>
<span class="source-line-no">560</span><span id="line-560">        String ret="";</span>
<span class="source-line-no">561</span><span id="line-561">        JComponent comp = elements.get(nom);</span>
<span class="source-line-no">562</span><span id="line-562">            </span>
<span class="source-line-no">563</span><span id="line-563">        try{</span>
<span class="source-line-no">564</span><span id="line-564">            if ( comp instanceof JList )</span>
<span class="source-line-no">565</span><span id="line-565">                {</span>
<span class="source-line-no">566</span><span id="line-566">                    JList l = (JList)comp;</span>
<span class="source-line-no">567</span><span id="line-567">                    if (! l.isSelectionEmpty())</span>
<span class="source-line-no">568</span><span id="line-568">                        ret = (String)(l.getSelectedValue());</span>
<span class="source-line-no">569</span><span id="line-569">                }</span>
<span class="source-line-no">570</span><span id="line-570">            else</span>
<span class="source-line-no">571</span><span id="line-571">                {</span>
<span class="source-line-no">572</span><span id="line-572">                    JTextComponent ct = (JTextComponent)comp;</span>
<span class="source-line-no">573</span><span id="line-573">                    ret=ct.getText();</span>
<span class="source-line-no">574</span><span id="line-574">                }</span>
<span class="source-line-no">575</span><span id="line-575">        }catch(Exception ex){}</span>
<span class="source-line-no">576</span><span id="line-576">        return ret;</span>
<span class="source-line-no">577</span><span id="line-577">    }</span>
<span class="source-line-no">578</span><span id="line-578"></span>
<span class="source-line-no">579</span><span id="line-579">    /** Methode qui change la valeur d'un champ.</span>
<span class="source-line-no">580</span><span id="line-580">        @param nom Le nom du champ</span>
<span class="source-line-no">581</span><span id="line-581">        @param valeur la nouvelle valeur du champ */</span>
<span class="source-line-no">582</span><span id="line-582">    public void setValeurChamp(String nom,String valeur)</span>
<span class="source-line-no">583</span><span id="line-583">    {</span>
<span class="source-line-no">584</span><span id="line-584">        JComponent comp = elements.get(nom);</span>
<span class="source-line-no">585</span><span id="line-585">        try{</span>
<span class="source-line-no">586</span><span id="line-586">            JTextComponent ct = (JTextComponent)comp;</span>
<span class="source-line-no">587</span><span id="line-587">            ct.setText(valeur);</span>
<span class="source-line-no">588</span><span id="line-588">        }catch(Exception ex){}</span>
<span class="source-line-no">589</span><span id="line-589">    }</span>
<span class="source-line-no">590</span><span id="line-590"></span>
<span class="source-line-no">591</span><span id="line-591"></span>
<span class="source-line-no">592</span><span id="line-592">    /** Methode qui change les valeurs d'une liste de scroll</span>
<span class="source-line-no">593</span><span id="line-593">        @param nom Le nom du champ</span>
<span class="source-line-no">594</span><span id="line-594">        @param values la nouvelle liste de valeur */</span>
<span class="source-line-no">595</span><span id="line-595">    public void setListData(String nom,String[] values)</span>
<span class="source-line-no">596</span><span id="line-596">    {</span>
<span class="source-line-no">597</span><span id="line-597">        try{</span>
<span class="source-line-no">598</span><span id="line-598">            JComponent comp = elements.get(nom);</span>
<span class="source-line-no">599</span><span id="line-599">            JList l = (JList)comp;</span>
<span class="source-line-no">600</span><span id="line-600">            Vector&lt;String&gt; v = new Vector&lt;String&gt;();</span>
<span class="source-line-no">601</span><span id="line-601">            if (values!=null)</span>
<span class="source-line-no">602</span><span id="line-602">                Collections.addAll(v,values);</span>
<span class="source-line-no">603</span><span id="line-603">            l.setListData(v);</span>
<span class="source-line-no">604</span><span id="line-604">        }catch(Exception ex){}</span>
<span class="source-line-no">605</span><span id="line-605">    }</span>
<span class="source-line-no">606</span><span id="line-606"></span>
<span class="source-line-no">607</span><span id="line-607"></span>
<span class="source-line-no">608</span><span id="line-608">    // Classe d'action des boutons du formulaire</span>
<span class="source-line-no">609</span><span id="line-609">    class SubmitListener implements ActionListener</span>
<span class="source-line-no">610</span><span id="line-610">    {</span>
<span class="source-line-no">611</span><span id="line-611">        private Formulaire form;</span>
<span class="source-line-no">612</span><span id="line-612">        private String     nomSubmit;</span>
<span class="source-line-no">613</span><span id="line-613"></span>
<span class="source-line-no">614</span><span id="line-614">        public SubmitListener(Formulaire form, String nomSubmit)</span>
<span class="source-line-no">615</span><span id="line-615">        {</span>
<span class="source-line-no">616</span><span id="line-616">            this.form      = form;</span>
<span class="source-line-no">617</span><span id="line-617">            this.nomSubmit = nomSubmit;</span>
<span class="source-line-no">618</span><span id="line-618">        }</span>
<span class="source-line-no">619</span><span id="line-619"></span>
<span class="source-line-no">620</span><span id="line-620">        public void actionPerformed(ActionEvent e)</span>
<span class="source-line-no">621</span><span id="line-621">        {</span>
<span class="source-line-no">622</span><span id="line-622">            try{</span>
<span class="source-line-no">623</span><span id="line-623">                if (app!=null)   // NE PAS UTILISER this.app : on est dans une inner class</span>
<span class="source-line-no">624</span><span id="line-624">                    app.submit(form,nomSubmit);</span>
<span class="source-line-no">625</span><span id="line-625">                </span>
<span class="source-line-no">626</span><span id="line-626">                if (this.nomSubmit.equals( buttonFermer))</span>
<span class="source-line-no">627</span><span id="line-627">                    {</span>
<span class="source-line-no">628</span><span id="line-628">                        frame.dispose();</span>
<span class="source-line-no">629</span><span id="line-629">                        if (synchrone) debloquer();</span>
<span class="source-line-no">630</span><span id="line-630">                    }</span>
<span class="source-line-no">631</span><span id="line-631">            }</span>
<span class="source-line-no">632</span><span id="line-632">            catch(Exception ex)</span>
<span class="source-line-no">633</span><span id="line-633">                {</span>
<span class="source-line-no">634</span><span id="line-634">                    ex.printStackTrace();</span>
<span class="source-line-no">635</span><span id="line-635">                    if (synchrone) </span>
<span class="source-line-no">636</span><span id="line-636">                        {</span>
<span class="source-line-no">637</span><span id="line-637">                            frame.dispose();</span>
<span class="source-line-no">638</span><span id="line-638">                            debloquer();</span>
<span class="source-line-no">639</span><span id="line-639">                            exceptionForm = ex;</span>
<span class="source-line-no">640</span><span id="line-640">                        }</span>
<span class="source-line-no">641</span><span id="line-641">                }</span>
<span class="source-line-no">642</span><span id="line-642">        }</span>
<span class="source-line-no">643</span><span id="line-643">    }</span>
<span class="source-line-no">644</span><span id="line-644"></span>
<span class="source-line-no">645</span><span id="line-645">    // Classe pour fermer le formulaire</span>
<span class="source-line-no">646</span><span id="line-646">    class FormulaireWindowListener extends WindowAdapter</span>
<span class="source-line-no">647</span><span id="line-647">    {</span>
<span class="source-line-no">648</span><span id="line-648">        public void windowClosing(WindowEvent e)</span>
<span class="source-line-no">649</span><span id="line-649">        {</span>
<span class="source-line-no">650</span><span id="line-650">            frame.dispose();</span>
<span class="source-line-no">651</span><span id="line-651">            if (synchrone) debloquer();</span>
<span class="source-line-no">652</span><span id="line-652">        }</span>
<span class="source-line-no">653</span><span id="line-653">    }</span>
<span class="source-line-no">654</span><span id="line-654"></span>
<span class="source-line-no">655</span><span id="line-655">    /* Pour attendre l'execution du code si mmode synchrine */</span>
<span class="source-line-no">656</span><span id="line-656">    private void attendre() </span>
<span class="source-line-no">657</span><span id="line-657">    {</span>
<span class="source-line-no">658</span><span id="line-658">        synchronized(this.verrou)</span>
<span class="source-line-no">659</span><span id="line-659">            {</span>
<span class="source-line-no">660</span><span id="line-660">                try{this.verrou.wait();}catch(Exception l_ex)</span>
<span class="source-line-no">661</span><span id="line-661">                    {System.out.println(l_ex);};</span>
<span class="source-line-no">662</span><span id="line-662">            }</span>
<span class="source-line-no">663</span><span id="line-663">    }</span>
<span class="source-line-no">664</span><span id="line-664">    private void debloquer()</span>
<span class="source-line-no">665</span><span id="line-665">    {</span>
<span class="source-line-no">666</span><span id="line-666">        synchronized(this.verrou)</span>
<span class="source-line-no">667</span><span id="line-667">            {</span>
<span class="source-line-no">668</span><span id="line-668">                try{this.verrou.notify();}catch(Exception l_ex){};</span>
<span class="source-line-no">669</span><span id="line-669">            }</span>
<span class="source-line-no">670</span><span id="line-670">    }</span>
<span class="source-line-no">671</span><span id="line-671"></span>
<span class="source-line-no">672</span><span id="line-672">    // ==========================================</span>
<span class="source-line-no">673</span><span id="line-673">    /** Methodes de saisie elementaire d'un texte.&lt;BR&gt;</span>
<span class="source-line-no">674</span><span id="line-674">        Ceci remplace la classe Terminal</span>
<span class="source-line-no">675</span><span id="line-675">        @param texteInvite Texte d'invite de saisi</span>
<span class="source-line-no">676</span><span id="line-676">    */</span>
<span class="source-line-no">677</span><span id="line-677">    public static String lireString(String texteInvite)</span>
<span class="source-line-no">678</span><span id="line-678">    {</span>
<span class="source-line-no">679</span><span id="line-679">        SaisieString saisie = new SaisieString();</span>
<span class="source-line-no">680</span><span id="line-680">        Formulaire form = new Formulaire("Saisi de String",</span>
<span class="source-line-no">681</span><span id="line-681">                                         saisie,</span>
<span class="source-line-no">682</span><span id="line-682">                                         true,150,2*Formulaire.heightText,</span>
<span class="source-line-no">683</span><span id="line-683">                                         true);</span>
<span class="source-line-no">684</span><span id="line-684"></span>
<span class="source-line-no">685</span><span id="line-685">        form.addText("String",texteInvite,true,"");</span>
<span class="source-line-no">686</span><span id="line-686">        form.addButton("Valider","Valider");</span>
<span class="source-line-no">687</span><span id="line-687">        form.setButtonFermer("Valider");</span>
<span class="source-line-no">688</span><span id="line-688">        try{</span>
<span class="source-line-no">689</span><span id="line-689">            form.afficher();</span>
<span class="source-line-no">690</span><span id="line-690">        }catch(Exception ex){</span>
<span class="source-line-no">691</span><span id="line-691">            System.out.println("Erreur de saisi dans le formulaire"); }</span>
<span class="source-line-no">692</span><span id="line-692">        </span>
<span class="source-line-no">693</span><span id="line-693">        return saisie.value;</span>
<span class="source-line-no">694</span><span id="line-694">    }</span>
<span class="source-line-no">695</span><span id="line-695"></span>
<span class="source-line-no">696</span><span id="line-696">    /**</span>
<span class="source-line-no">697</span><span id="line-697">       desactiver un des composants du formulaire</span>
<span class="source-line-no">698</span><span id="line-698">       @param nom Nom du composant</span>
<span class="source-line-no">699</span><span id="line-699">    */</span>
<span class="source-line-no">700</span><span id="line-700">    public void desactiver(String nom) throws RuntimeException</span>
<span class="source-line-no">701</span><span id="line-701">    {</span>
<span class="source-line-no">702</span><span id="line-702">        JComponent e = elements.get(nom);</span>
<span class="source-line-no">703</span><span id="line-703">        if (e!=null)</span>
<span class="source-line-no">704</span><span id="line-704">            {</span>
<span class="source-line-no">705</span><span id="line-705">                if (e.getClass().getName().equals("javax.swing.JButton"))</span>
<span class="source-line-no">706</span><span id="line-706">                    e.setEnabled(false);</span>
<span class="source-line-no">707</span><span id="line-707">                if (e.getClass().getName().equals("javax.swing.JTextField"))</span>
<span class="source-line-no">708</span><span id="line-708">                    {</span>
<span class="source-line-no">709</span><span id="line-709">                        JTextField tf = (JTextField)e;</span>
<span class="source-line-no">710</span><span id="line-710">                        tf.setEditable(false);</span>
<span class="source-line-no">711</span><span id="line-711">                    }</span>
<span class="source-line-no">712</span><span id="line-712">            }</span>
<span class="source-line-no">713</span><span id="line-713">        else</span>
<span class="source-line-no">714</span><span id="line-714">            throw new RuntimeException(nom+" n'existe pas");</span>
<span class="source-line-no">715</span><span id="line-715">    }</span>
<span class="source-line-no">716</span><span id="line-716"></span>
<span class="source-line-no">717</span><span id="line-717">    /**</span>
<span class="source-line-no">718</span><span id="line-718">       activer un des composants du formulaire</span>
<span class="source-line-no">719</span><span id="line-719">       @param nom Nom du composant</span>
<span class="source-line-no">720</span><span id="line-720">    */</span>
<span class="source-line-no">721</span><span id="line-721">    public void activer(String nom) throws RuntimeException</span>
<span class="source-line-no">722</span><span id="line-722">    {</span>
<span class="source-line-no">723</span><span id="line-723">        JComponent e = elements.get(nom);</span>
<span class="source-line-no">724</span><span id="line-724">        if (e!=null)</span>
<span class="source-line-no">725</span><span id="line-725">            {</span>
<span class="source-line-no">726</span><span id="line-726">                if (e.getClass().getName().equals("javax.swing.JButton"))</span>
<span class="source-line-no">727</span><span id="line-727">                    e.setEnabled(true);</span>
<span class="source-line-no">728</span><span id="line-728">                if (e.getClass().getName().equals("javax.swing.JTextField"))</span>
<span class="source-line-no">729</span><span id="line-729">                    {</span>
<span class="source-line-no">730</span><span id="line-730">                        JTextField tf = (JTextField)e;</span>
<span class="source-line-no">731</span><span id="line-731">                        tf.setEditable(true);</span>
<span class="source-line-no">732</span><span id="line-732">                    }</span>
<span class="source-line-no">733</span><span id="line-733">            }</span>
<span class="source-line-no">734</span><span id="line-734">        else</span>
<span class="source-line-no">735</span><span id="line-735">            throw new RuntimeException(nom+" n'existe pas");</span>
<span class="source-line-no">736</span><span id="line-736">    }</span>
<span class="source-line-no">737</span><span id="line-737"></span>
<span class="source-line-no">738</span><span id="line-738"></span>
<span class="source-line-no">739</span><span id="line-739">    /**</span>
<span class="source-line-no">740</span><span id="line-740">      Programme principal de test de la classe Formulaire.</span>
<span class="source-line-no">741</span><span id="line-741">      Cette methode teste les methodes de classe.</span>
<span class="source-line-no">742</span><span id="line-742">    */</span>
<span class="source-line-no">743</span><span id="line-743">    public static void main (String... args) throws Exception</span>
<span class="source-line-no">744</span><span id="line-744">    {</span>
<span class="source-line-no">745</span><span id="line-745">        // Affichage d'un formulaire qui calcule l'addition de deux entiers</span>
<span class="source-line-no">746</span><span id="line-746">        //</span>
<span class="source-line-no">747</span><span id="line-747">        TesterFormulaire test1 = new TesterFormulaire();</span>
<span class="source-line-no">748</span><span id="line-748">        boolean synchrone = false;</span>
<span class="source-line-no">749</span><span id="line-749">        Formulaire form = new Formulaire("TESTER",test1,synchrone,700,600,true);</span>
<span class="source-line-no">750</span><span id="line-750"></span>
<span class="source-line-no">751</span><span id="line-751">        form.setAutoWidth(true);</span>
<span class="source-line-no">752</span><span id="line-752">        form.addLabel("Faire l'addition de deux entiers :");</span>
<span class="source-line-no">753</span><span id="line-753">        form.addText("val1","Valeur 1 :",true,"123");</span>
<span class="source-line-no">754</span><span id="line-754">        form.addText("val2","Valeur 2",true,"456");</span>
<span class="source-line-no">755</span><span id="line-755">        form.setWidthButtonCour(150);</span>
<span class="source-line-no">756</span><span id="line-756">        form.addButton("add","Additionner");</span>
<span class="source-line-no">757</span><span id="line-757">        String[] values = { "la belle de nuit", "la fille de l'air","le gareon manque","abcdefghijklmnopqrstuvwxyz","111","2222","3333"};</span>
<span class="source-line-no">758</span><span id="line-758">        form.addListScroll("LIST","Zone ",true,values,200,100);</span>
<span class="source-line-no">759</span><span id="line-759">        form.addButton("SELECTION","SELECTION");</span>
<span class="source-line-no">760</span><span id="line-760">        form.setPosition(300,10);</span>
<span class="source-line-no">761</span><span id="line-761">        form.addZoneText("zone","Historique",true,"",300,500);</span>
<span class="source-line-no">762</span><span id="line-762"></span>
<span class="source-line-no">763</span><span id="line-763"></span>
<span class="source-line-no">764</span><span id="line-764">        form.addButton("exit","Fermer la fenetre");</span>
<span class="source-line-no">765</span><span id="line-765">        form.setButtonFermer("exit");</span>
<span class="source-line-no">766</span><span id="line-766">        form.afficher();</span>
<span class="source-line-no">767</span><span id="line-767">        </span>
<span class="source-line-no">768</span><span id="line-768">        // Saisie SYNCHRONE d'une chaine</span>
<span class="source-line-no">769</span><span id="line-769">        //</span>
<span class="source-line-no">770</span><span id="line-770">        //String str = Formulaire.lireString("Saisir");</span>
<span class="source-line-no">771</span><span id="line-771">        //System.out.println(str);</span>
<span class="source-line-no">772</span><span id="line-772"></span>
<span class="source-line-no">773</span><span id="line-773"></span>
<span class="source-line-no">774</span><span id="line-774">        // Un autre exemple de formulaire pour montrer les possibilites de positionnement</span>
<span class="source-line-no">775</span><span id="line-775">        //</span>
<span class="source-line-no">776</span><span id="line-776">        form = new Formulaire("TESTER",test1,false,1200,600,true);</span>
<span class="source-line-no">777</span><span id="line-777">        </span>
<span class="source-line-no">778</span><span id="line-778">        form.setPosition(10,10);</span>
<span class="source-line-no">779</span><span id="line-779">        form.horizontal();</span>
<span class="source-line-no">780</span><span id="line-780">        form.addText("Exemple","Exemple",true,"ABCDE");</span>
<span class="source-line-no">781</span><span id="line-781">        form.addPosition(50,form.getYCour());</span>
<span class="source-line-no">782</span><span id="line-782">        form.addText("Champ1","Champ1",true,""); </span>
<span class="source-line-no">783</span><span id="line-783">        form.dessous(10);</span>
<span class="source-line-no">784</span><span id="line-784">        form.vertical();</span>
<span class="source-line-no">785</span><span id="line-785">        form.setWidthButtonCour(50);</span>
<span class="source-line-no">786</span><span id="line-786">        form.addButton("B1","B1"); </span>
<span class="source-line-no">787</span><span id="line-787">        form.addButton("B2","B2");</span>
<span class="source-line-no">788</span><span id="line-788">        form.horizontal();</span>
<span class="source-line-no">789</span><span id="line-789">        form.addButton("B3","B3");</span>
<span class="source-line-no">790</span><span id="line-790">        form.addButton("B4","B4"); //x=100 et en dessous par defaut</span>
<span class="source-line-no">791</span><span id="line-791">        form.addButton("B5","B5"); </span>
<span class="source-line-no">792</span><span id="line-792">        form.dessous(30);</span>
<span class="source-line-no">793</span><span id="line-793">        form.vertical();</span>
<span class="source-line-no">794</span><span id="line-794">        form.addText("Champ2","Champ2",false,"222"); // non editable</span>
<span class="source-line-no">795</span><span id="line-795">        form.addText("Champ3","Champ3",true,"33333");</span>
<span class="source-line-no">796</span><span id="line-796">        form.setPosition(300,100);</span>
<span class="source-line-no">797</span><span id="line-797">        form.vertical();</span>
<span class="source-line-no">798</span><span id="line-798">        form.addZoneText("z1","Zone 1",true,"",300,100);</span>
<span class="source-line-no">799</span><span id="line-799">        form.addZoneText("z2","Zone 2",true,"",100,100);</span>
<span class="source-line-no">800</span><span id="line-800">        form.addText("z4","Champ4",true,"33333");</span>
<span class="source-line-no">801</span><span id="line-801">        form.setPosition(650,10);</span>
<span class="source-line-no">802</span><span id="line-802">        form.addGrilleIHM(10,10,20,new TestActions(test1));</span>
<span class="source-line-no">803</span><span id="line-803">        form.setWidthButtonCour(150);</span>
<span class="source-line-no">804</span><span id="line-804">        form.addButton("Couleur1","Couleur1");</span>
<span class="source-line-no">805</span><span id="line-805">        form.addButton("Couleur2","Couleur2");</span>
<span class="source-line-no">806</span><span id="line-806">        form.addButton("Couleur3","Couleur3");</span>
<span class="source-line-no">807</span><span id="line-807">        form.addButton("Couleur4","Couleur4");</span>
<span class="source-line-no">808</span><span id="line-808">        form.afficher();</span>
<span class="source-line-no">809</span><span id="line-809"></span>
<span class="source-line-no">810</span><span id="line-810">    }</span>
<span class="source-line-no">811</span><span id="line-811">}</span>
<span class="source-line-no">812</span><span id="line-812"></span>
<span class="source-line-no">813</span><span id="line-813">// ================================================================</span>
<span class="source-line-no">814</span><span id="line-814"></span>
<span class="source-line-no">815</span><span id="line-815">// Classe non inner-class car utilisee dans une methode statique.</span>
<span class="source-line-no">816</span><span id="line-816">// Cette classe est utilise pour saisir une chaine dans une IHM</span>
<span class="source-line-no">817</span><span id="line-817">//  et de maniere synchrone</span>
<span class="source-line-no">818</span><span id="line-818">//</span>
<span class="source-line-no">819</span><span id="line-819">class SaisieString implements FormulaireInt</span>
<span class="source-line-no">820</span><span id="line-820">{</span>
<span class="source-line-no">821</span><span id="line-821">    String value;</span>
<span class="source-line-no">822</span><span id="line-822">    </span>
<span class="source-line-no">823</span><span id="line-823">    public SaisieString()</span>
<span class="source-line-no">824</span><span id="line-824">    {</span>
<span class="source-line-no">825</span><span id="line-825">        value="";</span>
<span class="source-line-no">826</span><span id="line-826">    }</span>
<span class="source-line-no">827</span><span id="line-827">    </span>
<span class="source-line-no">828</span><span id="line-828">    public void submit(Formulaire form,String nomSubmit)</span>
<span class="source-line-no">829</span><span id="line-829">    {</span>
<span class="source-line-no">830</span><span id="line-830">        if (nomSubmit.equals("Valider"))</span>
<span class="source-line-no">831</span><span id="line-831">            {</span>
<span class="source-line-no">832</span><span id="line-832">                this.value   = form.getValeurChamp("String");</span>
<span class="source-line-no">833</span><span id="line-833">            }</span>
<span class="source-line-no">834</span><span id="line-834">        </span>
<span class="source-line-no">835</span><span id="line-835">    }</span>
<span class="source-line-no">836</span><span id="line-836"></span>
<span class="source-line-no">837</span><span id="line-837">}</span>
<span class="source-line-no">838</span><span id="line-838"></span>
<span class="source-line-no">839</span><span id="line-839">class TesterFormulaire implements FormulaireInt</span>
<span class="source-line-no">840</span><span id="line-840">{</span>
<span class="source-line-no">841</span><span id="line-841">    String historique;</span>
<span class="source-line-no">842</span><span id="line-842">    public int couleur;</span>
<span class="source-line-no">843</span><span id="line-843">    </span>
<span class="source-line-no">844</span><span id="line-844">    public TesterFormulaire()</span>
<span class="source-line-no">845</span><span id="line-845">    {</span>
<span class="source-line-no">846</span><span id="line-846">        historique = "";</span>
<span class="source-line-no">847</span><span id="line-847">        couleur=1;</span>
<span class="source-line-no">848</span><span id="line-848">    }</span>
<span class="source-line-no">849</span><span id="line-849"></span>
<span class="source-line-no">850</span><span id="line-850">    public void submit(Formulaire form,String nomSubmit)</span>
<span class="source-line-no">851</span><span id="line-851">    {</span>
<span class="source-line-no">852</span><span id="line-852">        if (nomSubmit.equals("add"))</span>
<span class="source-line-no">853</span><span id="line-853">            {</span>
<span class="source-line-no">854</span><span id="line-854">                try{</span>
<span class="source-line-no">855</span><span id="line-855">                    String s1 = form.getValeurChamp("val1");</span>
<span class="source-line-no">856</span><span id="line-856">                    String s2 = form.getValeurChamp("val2");</span>
<span class="source-line-no">857</span><span id="line-857">                    int v1 = Integer.parseInt(s1);</span>
<span class="source-line-no">858</span><span id="line-858">                    int v2 = Integer.parseInt(s2);</span>
<span class="source-line-no">859</span><span id="line-859">                    </span>
<span class="source-line-no">860</span><span id="line-860">                    historique = historique+String.format("%5d + %5d = %7d\n",v1,v2,v1+v2);</span>
<span class="source-line-no">861</span><span id="line-861">                }catch(Exception ex)</span>
<span class="source-line-no">862</span><span id="line-862">                    {</span>
<span class="source-line-no">863</span><span id="line-863">                        historique = historique+ex.getMessage()+"\n";</span>
<span class="source-line-no">864</span><span id="line-864">                    }</span>
<span class="source-line-no">865</span><span id="line-865">            }</span>
<span class="source-line-no">866</span><span id="line-866">        if (nomSubmit.equals("SELECTION"))</span>
<span class="source-line-no">867</span><span id="line-867">            {</span>
<span class="source-line-no">868</span><span id="line-868">                historique = historique + "&gt;&gt; "+ form.getValeurChamp("LIST")+"\n";</span>
<span class="source-line-no">869</span><span id="line-869">            }</span>
<span class="source-line-no">870</span><span id="line-870">        form.setValeurChamp("zone",historique);</span>
<span class="source-line-no">871</span><span id="line-871"></span>
<span class="source-line-no">872</span><span id="line-872">        if (nomSubmit.equals("B1"))</span>
<span class="source-line-no">873</span><span id="line-873">            {</span>
<span class="source-line-no">874</span><span id="line-874">                form.desactiver("B3");</span>
<span class="source-line-no">875</span><span id="line-875">            }</span>
<span class="source-line-no">876</span><span id="line-876">        if (nomSubmit.equals("B2"))</span>
<span class="source-line-no">877</span><span id="line-877">            {</span>
<span class="source-line-no">878</span><span id="line-878">                form.activer("B3");</span>
<span class="source-line-no">879</span><span id="line-879">            }</span>
<span class="source-line-no">880</span><span id="line-880">        if (nomSubmit.equals("B4"))</span>
<span class="source-line-no">881</span><span id="line-881">            {</span>
<span class="source-line-no">882</span><span id="line-882">                form.activer("Champ2");</span>
<span class="source-line-no">883</span><span id="line-883">            }</span>
<span class="source-line-no">884</span><span id="line-884">        if (nomSubmit.equals("B5"))</span>
<span class="source-line-no">885</span><span id="line-885">            {</span>
<span class="source-line-no">886</span><span id="line-886">                form.desactiver("Champ2");</span>
<span class="source-line-no">887</span><span id="line-887">            }</span>
<span class="source-line-no">888</span><span id="line-888">        if (nomSubmit.equals("Couleur1")) couleur=1;</span>
<span class="source-line-no">889</span><span id="line-889">        if (nomSubmit.equals("Couleur2")) couleur=2;</span>
<span class="source-line-no">890</span><span id="line-890">        if (nomSubmit.equals("Couleur3")) couleur=3;</span>
<span class="source-line-no">891</span><span id="line-891">        if (nomSubmit.equals("Couleur4")) couleur=4;</span>
<span class="source-line-no">892</span><span id="line-892">    }</span>
<span class="source-line-no">893</span><span id="line-893">}</span>
<span class="source-line-no">894</span><span id="line-894"></span>
<span class="source-line-no">895</span><span id="line-895">class TestActions extends AdaptaterControlesCanvasIHM</span>
<span class="source-line-no">896</span><span id="line-896">{</span>
<span class="source-line-no">897</span><span id="line-897">    TesterFormulaire tf;</span>
<span class="source-line-no">898</span><span id="line-898">    public TestActions(TesterFormulaire tf)</span>
<span class="source-line-no">899</span><span id="line-899">    {</span>
<span class="source-line-no">900</span><span id="line-900">        this.tf=tf;</span>
<span class="source-line-no">901</span><span id="line-901">    }</span>
<span class="source-line-no">902</span><span id="line-902"></span>
<span class="source-line-no">903</span><span id="line-903">    public void pointerCaseGrille(int xCase,int yCase,CanvasIHM ihm)</span>
<span class="source-line-no">904</span><span id="line-904">    {</span>
<span class="source-line-no">905</span><span id="line-905">        //point = new Point(xCase,yCase);</span>
<span class="source-line-no">906</span><span id="line-906">        ihm.setMarque(tf.couleur,xCase,yCase);</span>
<span class="source-line-no">907</span><span id="line-907">    }</span>
<span class="source-line-no">908</span><span id="line-908">}</span>
<span class="source-line-no">909</span><span id="line-909"></span>
<span class="source-line-no">910</span><span id="line-910">    </span>




























































</pre>
</div>
</main>
</body>
</html>
